<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="google-site-verification" content>
  
  <title>在VScode上用代码撸UML图</title>
  <meta name="author" content="Victor">
  <meta name="description" content="blooooooooog">
  
  
  <meta property="og:title" content="在VScode上用代码撸UML图">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:site_name" content="belingud">
  <link href="/apple-touch-icon-precomposed.png" sizes="180x180" rel="apple-touch-icon-precomposed">
  <link rel="alternate" href="/atom.xml" title="belingud" type="application/atom+xml">
  <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/m.min.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
</html>
<body>
  <a id="top"></a>
  <div id="main">
    <div class="behind">
      <a href="/" class="back black-color">
        <svg class="i-close" viewBox="0 0 32 32" width="22" height="22" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
            <path d="M2 30 L30 2 M30 30 L2 2"></path>
        </svg>
      </a>
      <div class="description">
        &nbsp;life is beautiful
      </div>
    </div>
    <div class="main-ctnr">
      

  <article class="standard post">
    <div class="title">
      
  
    <h1 class="page-title center">
        在VScode上用代码撸UML图
    </h1>
  


    </div>
    <div class="meta center">
      
<time datetime="2019-06-10T09:39:14.000Z">
<svg class="i-calendar" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
    <path d="M2 6 L2 30 30 30 30 6 Z M2 15 L30 15 M7 3 L7 9 M13 3 L13 9 M19 3 L19 9 M25 3 L25 9"></path>
  </svg>
  &nbsp;
  2019-06-10
</time>






    
    &nbsp;
    <svg class="i-tag" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
      <circle cx="24" cy="8" r="2"></circle>
      <path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path>
    </svg>
    &nbsp;
    <a href="/tags/tools/">tools</a>


    </div>
    <hr>
    
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#uml图"><span class="toc-text">UML图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#uml和plantuml"><span class="toc-text">UML和PlantUML</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vscode"><span class="toc-text">VScode</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#java"><span class="toc-text">Java</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#下载"><span class="toc-text">下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装和环境变量"><span class="toc-text">安装和环境变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#安装"><span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#环境变量"><span class="toc-text">环境变量</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#windows10"><span class="toc-text">Windows10</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ubuntu"><span class="toc-text">Ubuntu</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#mac"><span class="toc-text">Mac</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vscode配置"><span class="toc-text">VScode配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#plantuml"><span class="toc-text">PlantUML</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#安装-v2"><span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设置"><span class="toc-text">设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用"><span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#markdown-preview-enhanced"><span class="toc-text">Markdown Preview Enhanced</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#安装-v3"><span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用-v2"><span class="toc-text">使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#atom配置"><span class="toc-text">Atom配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考"><span class="toc-text">参考</span></a></li></ol></li></ol>
    
    <div class="picture-container">
      
    </div>
    <p>[TOC]</p>
<h1 id="uml图">UML图</h1>
<h2 id="uml和plantuml">UML和PlantUML</h2>
<p>UML-Unified Modeling Language 统一建模语言，又称标准建模语言。是用来对软件密集系统进行可视化建模的一种语言。UML的定义包括UML语义和UML表示法两个元素。</p>
<p>PlantUML是一个实现UML快速绘图的开源项目，你可以在他的官网 <a href="http://plantuml.com/zh/" target="_blank" rel="noopener">http://plantuml.com/zh/</a> 找到下载包，是一个Java的jar包，但是你首先需要安装Java环境。</p>
<p>本文主要讲在VScode上利用PlantUML插件和Markdown Preview Enhance插件实现快速绘图，并导出图像。前者支持<code>*.wsd, *.pu, *.puml, *.plantuml, *.iuml</code>格式的文件，后者支持在Markdown中直接绘图和预览，并通过其他插件将Markdown文件导出为其他格式。</p>
<h2 id="vscode">VScode</h2>
<p>VScode是微软的针对于编写现代 Web 和云应用的跨平台源代码编辑器，同样支持多种文档的编写，插件丰富，功能强大，尤其是对于前端开发，相当友好，同样也可以用来开发Python项目。</p>
<p>VScode官网：<a href="https://code.visualstudio.com/" target="_blank" rel="noopener">https://code.visualstudio.com/</a> ，你可以直接下载对应系统的安装包，安装使用，不需要其他配置。新版的VScode将软件设置，从JSON格式改为了图形界面，不过同样可以编辑设置的JSON文件，如果你需要旧版JSON格式的设置界面，请自行搜索下载。</p>
<h2 id="java">Java</h2>
<h3 id="下载">下载</h3>
<p>你可以在ORACLE的Java官方站点下载对应系统的Java安装包，最新版的是Java SE12.0.1，推荐安装Java SE 8u211版本，在JDK那一项，点击Downloade。你需要下载的是 <strong>Java SE Development Kit 8u211</strong>，然后点击<strong>Accept License Agreement</strong>前面的按钮，X86代表32位的操作系统，X64代表64位的操作系统，选择对应的包下载即可。</p>
<h3 id="安装和环境变量">安装和环境变量</h3>
<h4 id="安装">安装</h4>
<p>下载完成后点击安装。</p>
<p>Windows可视情况安装在C盘或其他位置。Ubuntu用户可以直接下载deb安装包直接安装，找到你的Java安装位置，添加环境变量，或者下载压缩包自定义Java的位置。MacOS用户请自行百度。</p>
<h4 id="环境变量">环境变量</h4>
<h5 id="windows10">Windows10</h5>
<p>在搜索中搜索<strong>高级系统设置</strong>，点击进入<br>
[外链图片转存失败(img-E2IAh1dQ-1563347765263)(<a href="https://github.com/belingud/image/blob/master/csdnblog/%E9%AB%98%E7%BA%A7%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE.png?raw=true" target="_blank" rel="noopener">https://github.com/belingud/image/blob/master/csdnblog/高级系统设置.png?raw=true</a>)]<br>
找到<strong>环境变量</strong>，点击进入：<br>
[外链图片转存失败(img-rLnXqfqh-1563347765264)(<a href="https://github.com/belingud/image/blob/master/csdnblog/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png?raw=true" target="_blank" rel="noopener">https://github.com/belingud/image/blob/master/csdnblog/环境变量.png?raw=true</a>)]<br>
点击系统变量下面的新建，创建一个<strong>JAVE_HOME</strong>的系统变量，值为你Java安装的目录，自行变动，比如：</p>
<blockquote>
<p>D:\Program Files\Java\jdk1.8.0_91</p>
</blockquote>
<p>[外链图片转存失败(img-Pi63wW57-1563347765266)(<a href="https://github.com/belingud/image/blob/master/csdnblog/%E6%B7%BB%E5%8A%A0JAVA_HOME.png?raw=true" target="_blank" rel="noopener">https://github.com/belingud/image/blob/master/csdnblog/添加JAVA_HOME.png?raw=true</a>)]<br>
然后设置<strong>CLASS_PATH</strong>，值为<code>.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;</code>，复制粘贴即可：</p>
<p>[外链图片转存失败(img-rnrsDin3-1563347765271)(<a href="https://github.com/belingud/image/blob/master/csdnblog/java_class_path.png?raw=true" target="_blank" rel="noopener">https://github.com/belingud/image/blob/master/csdnblog/java_class_path.png?raw=true</a>)]<br>
然后找到<strong>系统变量</strong>中的<strong>Path</strong>，双击进入，点击新建，添加下面两行：</p>
<blockquote>
<p>变量值：%JAVA_HOME%\bin<br>
变量值：%JAVA_HOME%\jre\bin</p>
</blockquote>
<p>如图：<br>
[外链图片转存失败(img-c6W3owHo-1563347765273)(<a href="https://github.com/belingud/image/blob/master/csdnblog/java.png?raw=true" target="_blank" rel="noopener">https://github.com/belingud/image/blob/master/csdnblog/java.png?raw=true</a>)]<br>
测试：</p>
<p>在CMD或者Powershell中输入<code>javac</code>或者<code>java -version</code>检查是否安装成功。提示错误请重新检查安装步骤。</p>
<h5 id="ubuntu">Ubuntu</h5>
<p>同样在官网下载对应的安装包，安装后可以选择设置全局变量还是用户变量。</p>
<ol>
<li>修改全局变量</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile</span><br></pre></td></tr></table></figure>
<p>在profile末尾增加<code>JAVA_HOME</code>、<code>CLASSPATH</code>和<code>PATH</code>，例如</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/local/java/jdk1.8.0_171  # java的安装或解压目录</span><br><span class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib/dt.jar:$&#123;JAVA_HOME&#125;/lib/tools.jar</span><br><span class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</span><br></pre></td></tr></table></figure>
<p>然后运行<code>source /etc/profile</code>，是环境立即生效。</p>
<ol start="2">
<li>修改用户变量</li>
</ol>
<p>修改当前用户配置文件.bashrc，只作用于当前用户：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>设置与上一样</p>
<p>然后运行<code>source ~/.bashrc</code>，设设置立即生效。</p>
<p><strong>测试：</strong></p>
<p>运行<code>java -version</code>，查看java版本，如果正常输出版本信息则配置正确，你可以重启使设置永久生效。</p>
<h5 id="mac">Mac</h5>
<p>按照上面的步骤下载Java，下载完成后打开dmp，可以找到Java的根目录，如图。<br>
[外链图片转存失败(img-xj1qRvm0-1563347765276)(<a href="https://github.com/belingud/image/blob/master/csdnblog/MacJava.png?raw=true" target="_blank" rel="noopener">https://github.com/belingud/image/blob/master/csdnblog/MacJava.png?raw=true</a>)]<br>
编辑系统变量，添加JAVA_HOME、CLASS_PATH、PATH，打开终端，输入命令<code>sudo vim /etc/profile</code>进行编辑</p>
<blockquote>
<p>在终端输入 /usr/libexec/java_home 可以查看java的安装目录</p>
</blockquote>
<p>添加下面几行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME="/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home"</span><br><span class="line">export JAVA_HOME</span><br><span class="line">CLASS_PATH="$JAVA_HOME/lib"</span><br><span class="line">PATH=".$PATH:$JAVA_HOME/bin"</span><br></pre></td></tr></table></figure>
<p>保存并退出，运行<code>source /etc/profile</code>使配置立即生效。<br>
终端输入<code>java -version</code>检查配置是否生效。</p>
<h2 id="vscode配置">VScode配置</h2>
<p>VScode和Java安装成功之后，就可以配置VScode使其支持UML绘图。</p>
<h3 id="plantuml">PlantUML</h3>
<h4 id="安装-v2">安装</h4>
<p>安装PlantUML开源插件，支持多种文件后缀的UML图。</p>
<p>找到VScode扩展页，或者按<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>X</kbd>快捷键，直接打开。在搜索栏中搜索<strong>PlantUML</strong>，点击安装。生成其他的图形你可能需要安装GrapgViz(非必需)，不过一般情况下PlantUML足矣。</p>
<p>在扩展的介绍页面，有详细的配置讲解和注意事项，这里只进行简单的讲解。</p>
<h4 id="设置">设置</h4>
<p>点击VScode左下角的设置，然后点击设置右上角花括号，如图：</p>
<p>[外链图片转存失败(img-LV8JIAZq-1563347765280)(<a href="https://github.com/belingud/image/blob/master/csdnblog/VScode%E8%AE%BE%E7%BD%AE.png?raw=true" target="_blank" rel="noopener">https://github.com/belingud/image/blob/master/csdnblog/VScode设置.png?raw=true</a>)]</p>
<p>点击后：</p>
<p>[外链图片转存失败(img-M0fZIP8j-1563347765283)(<a href="https://github.com/belingud/image/blob/master/csdnblog/VScodeJSON.png?raw=true" target="_blank" rel="noopener">https://github.com/belingud/image/blob/master/csdnblog/VScodeJSON.png?raw=true</a>)]</p>
<p>添加下面一行：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"plantuml.includepaths": ["docs/diagrams/style","docs/diagrams/src"],</span><br></pre></td></tr></table></figure>
<p>你也可以设置导出和引用的目录，官方的提示是：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">"plantuml.diagramsRoot": "docs/diagrams/src",</span><br><span class="line">"plantuml.exportOutDir": "docs/diagrams/out"</span><br></pre></td></tr></table></figure>
<p>相对目录，可以自己设置（不建议）</p>
<p>基本的设置就是这些，其他的提示可以到插件详情里面查看。设置到这里，你就可以愉快的撸流程图了。</p>
<h4 id="使用">使用</h4>
<p>UML的语法可以在<a href="http://plantuml.com/zh/" target="_blank" rel="noopener">PlantUML</a>或者网页搜索UML语法查看。这里不再赘述。在VScode中创建新文件，后缀改为<code>*.wsd, *.pu, *.puml, *.plantuml, *.iuml</code>，输入代码。</p>
<p>PlantUML语法，以<code>@startuml</code>开头，以<code>@enduml</code>结束，中间键入图表代码。</p>
<ol>
<li>右键点击文件区域，可以看到下面的列表，可以点击预览，导出等</li>
</ol>
<p>[外链图片转存失败(img-3rl9Anum-1563347765287)(<a href="https://github.com/belingud/image/blob/master/csdnblog/%E5%8F%B3%E9%94%AE%E7%82%B9%E5%87%BB.png?raw=true" target="_blank" rel="noopener">https://github.com/belingud/image/blob/master/csdnblog/右键点击.png?raw=true</a>)]</p>
<ol start="2">
<li>或者使用快捷键<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd>，打开命令面板，搜索PlantUML，有相同的选项列表，不再贴图。</li>
</ol>
<h3 id="markdown-preview-enhanced">Markdown Preview Enhanced</h3>
<p>不只是使用PlantUML插件，你同样可以在Markdown文件中画UML图，通过<strong>Markdown Preview Enhanced</strong>插件来预览和导出，同样依赖与Java。</p>
<h4 id="安装-v3">安装</h4>
<p>找到VScode扩展页，或者按<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>X</kbd>快捷键，直接打开。在搜索栏中搜索<strong>Markdown Preview Enhanced</strong>，点击安装。</p>
<blockquote>
<p>对于书写Markdown文件，你可能需要一个叫做<strong>Markdown All In One</strong>的插件，可以自动补充markdown语法，并支持快捷键。</p>
</blockquote>
<p>这个插件不需要其他的设置，你可以直接使用其进行预览。在Markdown编辑页面的右上角，找到<code>Open Preview To The Side</code>，点击，或者在空白处点击右键，在列表里面找到<code>Open Preview To The Side</code>，就可以在侧边预览Markdown文件的效果。</p>
<h4 id="使用-v2">使用</h4>
<p>在markdown中画uml图表，需要写在代码块中，语言标识为plantuml。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">```plantuml开头</span><br><span class="line">@srartuml</span><br><span class="line">。。。</span><br><span class="line">@enduml</span><br><span class="line">``</span><br></pre></td></tr></table></figure>
<p>在预览图中点击右键，可以看到设置菜单，<em>PDF</em>,<em>eBook</em>,<em>Pandoc</em>导出需要自行安装<em>prince xml</em>,<em>pandoc</em>插件，prince xml结合插件生成的PDF效果并不让人满意，如果有需求请自行搜索。推荐使用<strong>Chrome</strong>导出文件。</p>
<p>[外链图片转存失败(img-TI6ezCqL-1563347765290)(<a href="https://github.com/belingud/image/blob/master/csdnblog/Enhance%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95.png?raw=true" target="_blank" rel="noopener">https://github.com/belingud/image/blob/master/csdnblog/Enhance右键菜单.png?raw=true</a>)]</p>
<p><strong>注意，如果图画的太长会被分成多页。</strong></p>
<h2 id="atom配置">Atom配置</h2>
<p>Atom类似于VScode，也是一个优秀的源代码编辑工具，你也可以使用他来画UML图表，官网：<a href="https://atom.io/" target="_blank" rel="noopener">https://atom.io/</a> 同VScode一样，需要在<strong>install</strong>中搜索PlantUML或者Markdown Preview Enhanced插件安装，不需要其他设置，使用也和VScode中类似，不再赘述。</p>
<hr>
<br>
<br>
<h2 id="参考">参考</h2>
<p>Windows10设置Java环境变量：<a href="https://www.cnblogs.com/silence9527/p/7358239.html" target="_blank" rel="noopener">https://www.cnblogs.com/silence9527/p/7358239.html</a></p>
<p>Ubuntu设置Java环境变量：</p>
<p><a href="https://www.tiomg.org/blog?uuid=9a239850-e28c-4723-9f54-1442cb9480dc" target="_blank" rel="noopener">https://www.tiomg.org/blog?uuid=9a239850-e28c-4723-9f54-1442cb9480dc</a></p>
<p>PlantUML官方站点：</p>
<p><a href="http://plantuml.com/zh/" target="_blank" rel="noopener">http://plantuml.com/zh/</a></p>
<p>Markdown Preview Enhanced官方站点：</p>
<p><a href="https://shd101wyy.github.io/markdown-preview-enhanced/#/" target="_blank" rel="noopener">https://shd101wyy.github.io/markdown-preview-enhanced/#/</a></p>


  </article>
  </script>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
  </script>
  <div class="busuanzi center">
    页阅读量:&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;・&nbsp;
    站访问量:&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;・&nbsp;
    站访客数:&nbsp;<span id="busuanzi_value_site_uv"></span>
  </div>


    




    </div>
  </div>
  <footer class="page-footer"><div class="clearfix">
</div>
<div class="right-foot">
    <div class="firstrow">
        <a href="#top" target="_self">
        <svg class="i-caret-right" viewBox="0 0 32 32" width="24" height="24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
            <path d="M10 30 L26 16 10 2 Z"></path>
        </svg>
        </a>
        © Victor 2019.7.17
    </div>
    <div class="secondrow">
        <a href="https://github.com/belingud">
        belingud
        </a>
    </div>
</div>
<div class="clearfix">
</div>
</footer>
  <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<script src="/js/search.min.js"></script>
<script type="text/javascript">

// disqus scripts


// dropdown scripts
$(".dropdown").click(function(event) {
  var current = $(this);
  event.stopPropagation();
  $(current).children(".dropdown-content")[($(current).children(".dropdown-content").hasClass("open"))?'removeClass':'addClass']("open")
});
$(document).click(function(){
    $(".dropdown-content").removeClass("open");
})

var path = "/search.xml";
searchFunc(path, 'local-search-input', 'local-search-result');

</script>

</body>
</html>
